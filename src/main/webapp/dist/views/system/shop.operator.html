<ol class="breadcrumb">
    <li><a ui-sref="dashboard">首页</a></li>
    <li><a ui-sref="shop">店铺管理</a></li>
    <li class="active">创建店铺</li>
</ol>
<div class="container-fluid">
    <div class="panel panel-default">
        <div class="panel-body">
            <h4>店铺基本信息</h4>
            <hr>
            <!-- form -->
            <form name="shopOperatorForm" class="form-horizontal" role="form" novalidate ng-submit="save(shop)">
                <!-- name -->
                <div class="form-group has-feedback" ng-class="{'has-success':(shopOperatorForm.name.$dirty && shopOperatorForm.name.$valid), 'has-warning':(shopOperatorForm.name.$dirty && shopOperatorForm.name.$invalid) }">
                    <label class="control-label col-md-2" for="name">店铺名称 <span class="text-danger">*</span></label>
                    <div class="col-md-5">
                        <input type="text" class="form-control" id="name" name="name" ng-model="shop.name" placeholder="店铺名称" required ng-maxlength="50" />
                        <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="shopOperatorForm.name.$dirty && shopOperatorForm.name.$valid"></span>
                        <span class="glyphicon glyphicon-warning-sign form-control-feedback" ng-show="shopOperatorForm.name.$dirty && shopOperatorForm.name.$invalid"></span>
                    </div>
                    <span class="col-md-5 help-block" ng-messages="shopOperatorForm.name.$error" ng-show="shopOperatorForm.name.$dirty && shopOperatorForm.name.$invalid">
                        <span ng-messages-include="views/error-messages.html?1" ></span>
                    </span>
                </div>
                <!-- type -->
                <div class="form-group has-feedback">
                    <label class="control-label col-md-2" for="type">店铺类型 <span class="text-danger">*</span></label>
                    <div class="col-md-5">
                        <select class="form-control" ng-model="shop.type" ng-options="type.id as type.label for type in types" id="type" name="type">
                        </select>
                    </div>
                </div>
                <!-- status -->
                <div class="form-group has-feedback">
                    <label class="control-label col-md-2" for="status">店铺状态 <span class="text-danger">*</span></label>
                    <div class="col-md-5">
                        <select class="form-control" ng-model="shop.status" ng-options="status.id as status.label for status in statuses" id="status" name="status">
                        </select>
                    </div>
                </div>
                <!-- admin_id -->
                <div class="form-group has-feedback" ng-class="{'has-success':(shopOperatorForm.admin_id.$dirty && shopOperatorForm.admin_id.$valid), 'has-warning':(shopOperatorForm.admin_id.$dirty && shopOperatorForm.admin_id.$invalid) }">
                    <label class="control-label col-md-2" for="admin_id">店铺管理员 <span class="text-danger">*</span></label>
                    <div class="col-md-5">
                        <select class="form-control" ng-model="shop.user.id" id="admin_id" name="admin_id" required>
                            <option ng-repeat="user in users" value="{{user.id}}" ng-selected="shop.user.id == user.id">{{user.username}}</option>
                        </select>
                    </div>
                    <!-- <span class="col-md-5 help-block" ng-messages="shopOperatorForm.admin_id.$error" ng-show="shopOperatorForm.admin_id.$dirty && shopOperatorForm.admin_id.$invalid">
                        <span ng-messages-include="views/error-messages.html?1" ></span>
                    </span> -->
                </div>
                <!-- api_call_limit -->
                <div class="form-group has-feedback" ng-class="{'has-success':(shopOperatorForm.api_call_limit.$dirty && shopOperatorForm.api_call_limit.$valid), 'has-warning':(shopOperatorForm.api_call_limit.$dirty && shopOperatorForm.api_call_limit.$invalid) }">
                    <label class="control-label col-md-2" for="api_call_limit">API 调用次数限制 <span class="text-danger">*</span></label>
                    <div class="col-md-5">
                        <input type="number" class="form-control" id="api_call_limit" name="api_call_limit" ng-model="shop.apiCallLimit" placeholder="API 调用次数限制" required ng-maxlength="6" />
                        <span class="glyphicon glyphicon-ok form-control-feedback" ng-show="shopOperatorForm.api_call_limit.$dirty && shopOperatorForm.api_call_limit.$valid"></span>
                        <span class="glyphicon glyphicon-warning-sign form-control-feedback" ng-show="shopOperatorForm.api_call_limit.$dirty && shopOperatorForm.api_call_limit.$invalid"></span>
                    </div>
                    <span class="col-md-5 help-block" ng-messages="shopOperatorForm.api_call_limit.$error" ng-show="shopOperatorForm.api_call_limit.$dirty && shopOperatorForm.api_call_limit.$invalid">
                        <span ng-messages-include="views/error-messages.html" ></span>
                    </span>
                </div>
                <!-- language_id -->
                <div class="form-group has-feedback">
                    <label class="control-label col-md-2" for="language_id">店铺显示语言 <span class="text-danger">*</span></label>
                    <div class="col-md-5">
                        <select class="form-control" ng-model="shop.language.id" id="language_id" name="language_id">
                            <option ng-repeat="language in languages" value="{{language.id}}" ng-selected="shop.language.id == language.id">{{language.name}}, {{language.code}}</option>
                        </select>
                    </div>
                </div>
                <!-- currency_id -->
                <div class="form-group has-feedback">
                    <label class="control-label col-md-2" for="currency_id">店铺结算货币 <span class="text-danger">*</span></label>
                    <div class="col-md-5">
                        <select class="form-control" ng-model="shop.currency.id" ng-options="currency.id as currency.name for currency in currencies" id="currency_id" name="currency_id">
                        </select>
                    </div>
                </div>
                <!-- price_level -->
                <div class="form-group has-feedback">
                    <label class="control-label col-md-2" for="price_level">店铺价格等级 <span class="text-danger">*</span></label>
                    <div class="col-md-5">
                        <select class="form-control" ng-model="shop.priceLevel" ng-options="lvl.id as lvl.label for lvl in lvls" id="price_level" name="price_level">
                        </select>
                    </div>
                </div>
                <!-- button -->
                <div class="form-group">
                    <div class="col-md-5 col-md-offset-2">
                        <button type="submit" class="btn btn-success btn-lg" ng-disabled="!shopOperatorForm.$valid">保存</button>
                        <button type="button" class="btn btn-danger btn-lg" ng-click="remove()" ng-if="action=='update'">删除</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
